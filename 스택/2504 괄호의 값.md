# [2504 ê´„í˜¸ì˜ ê°’](https://www.acmicpc.net/problem/2504)

### ğŸ¥‡ 5

### ë¶„ë¥˜

- êµ¬í˜„
- ìë£Œ êµ¬ì¡°
- ìŠ¤íƒ

### í’€ì´ ë‚ ì§œ

- 230113 ê¸ˆ
- 231002 ì›”

---

## CODE 1

```python
def is_valid(input_s):
    stack = []
    for ch in input_s:
        if ch in '([':
            stack.append(ch)
        elif ')' == ch and stack and '(' == stack[-1]:
            stack.pop()
        elif ']' == ch and stack and '[' == stack[-1]:
            stack.pop()
        else:
            return False
    if stack:
        return False
    return True


S = input()
if is_valid(S):
    stk = []
    couple = {')': '(', ']': '['}  # ê´„í˜¸ ì§
    value = {')': 2, ']': 3}  # ê´„í˜¸ì˜ ê³±í•´ì•¼ í•  ê°’
    for s in S:
        if s in '([':
            stk.append(s)
        elif s in ')]':
            tmp = 0
            while couple[s] != stk[-1]:  # ê´„í˜¸ ì§ì´ë©´ ì¢…ë£Œ
                tmp += int(stk.pop())  # ë‹«ëŠ” ê´„í˜¸ ë‚˜ì˜¬ ë•Œê¹Œì§€ ìˆ«ì ëˆ„ì 
            stk.pop()
            if tmp:  # tmpê°€ 0ì´ ì•„ë‹ˆë©´ ê´„í˜¸ ì¤‘ê°„ì— ê°’ ìˆìœ¼ë¯€ë¡œ 2ë‚˜ 3ì„ ê³±í•¨
                stk.append(tmp * value[s])
            else:  # tmpê°€ 0ì´ë©´ ê´„í˜¸ ì¤‘ê°„ì— ê°’ ì—†ìŒ
                stk.append(value[s])
    print(sum(stk))
else:
    print(0)
```

---

## í•´ì„¤ 1

---

## CODE 2

```python
import sys

input = sys.stdin.readline

s = input().strip()

stk = []
valid = True
for ch in s:
    if ch == '(' or ch == '[':
        stk.append(ch)
    elif ch == ')' and stk and stk[-1] == '(':
        stk.pop()
    elif ch == ']' and stk and stk[-1] == '[':
        stk.pop()
    else:
        valid = False
        break
if stk:
    valid = False
if not valid:
    print(0)
    exit()

pair = {')': '(', ']': '['}
score = {')': 2, ']': 3}
stk = []
for ch in s:
    if ch == '(' or ch == '[':
        stk.append(ch)
        continue
    acc = 0
    while stk[-1] != pair[ch]:
        acc += stk.pop()
    stk.pop()
    if acc == 0:
        stk.append(score[ch])
    else:
        stk.append(score[ch] * acc)

ans = sum(stk)
print(ans)
```

## í•´ì„¤ 2

`31388KB`, `40ms`
