# [1987 ì•ŒíŒŒë²³](https://www.acmicpc.net/problem/1987)

### ğŸ¥‡ 4

### ë¶„ë¥˜

- ê·¸ë˜í”„ ì´ë¡ 
- ê·¸ë˜í”„ íƒìƒ‰
- ê¹Šì´ ìš°ì„  íƒìƒ‰
- ë°±íŠ¸ë˜í‚¹

### í’€ì´ ë‚ ì§œ

- 230321 í™”
- 230325 í† 

---

## CODE 1

```python
import sys

input = sys.stdin.readline

R, C = map(int, input().split())
g = [list(map(lambda x: ord(x) - ord('A'), input().strip())) for _ in range(R)]


# í’€ì´
def solve():
    global R, C, g

    def dfs(cx, cy, cnt):
        res.add(cnt)
        for nx, ny in ((cx - 1, cy), (cx, cy + 1), (cx + 1, cy), (cx, cy - 1)):
            if 0 <= nx < R and 0 <= ny < C and not v[g[nx][ny]]:
                v[g[nx][ny]] = True
                dfs(nx, ny, cnt + 1)
                v[g[nx][ny]] = False
        return

    v = [False] * 26
    v[g[0][0]] = True
    res = set()
    dfs(0, 0, 1)
    ans = max(res)
    print(ans)
    return


solve()

```

## í•´ì„¤ 1

DFSëŠ” PyPy3ë¡œ í•´ì•¼ ì‹œê°„ ì´ˆê³¼ë¥¼ í”¼í•  ìˆ˜ ìˆë‹¤.

BFSëŠ” Python3ë¡œ ê°€ëŠ¥í•œë° í ëŒ€ì‹  ì…‹ì„ ì´ìš©í•´ì•¼ í•œë‹¤.

`179864KB`, `6424ms`

---

## CODE 2

```python
import sys

input = sys.stdin.readline


def dfs(x, y, cnt):
    global R, C, g, max_cnt, u

    # ì´ë¯¸ ì„œë¡œ ë‹¤ë¥¸ ëª¨ë“  ì•ŒíŒŒë²³ì„ ì—°ê²°í•¨
    if cnt >= 26:
        print(26)
        exit(0)

    max_cnt = max(max_cnt, cnt)

    nx = x - 1
    if nx >= 0 and not u[g[nx][y]]:
        u[g[nx][y]] = True
        dfs(nx, y, cnt + 1)
        u[g[nx][y]] = False

    nx = x + 1
    if nx < R and not u[g[nx][y]]:
        u[g[nx][y]] = True
        dfs(nx, y, cnt + 1)
        u[g[nx][y]] = False

    ny = y - 1
    if ny >= 0 and not u[g[x][ny]]:
        u[g[x][ny]] = True
        dfs(x, ny, cnt + 1)
        u[g[x][ny]] = False

    ny = y + 1
    if ny < C and not u[g[x][ny]]:
        u[g[x][ny]] = True
        dfs(x, ny, cnt + 1)
        u[g[x][ny]] = False
    return


R, C = map(int, input().split())
g = [list(map(lambda x: ord(x) - 65, input().rstrip()))for _ in range(R)]

max_cnt = 1
u = [False] * 26
u[g[0][0]] = True

dfs(0, 0, 1)

print(max_cnt)

```

## í•´ì„¤ 2

C++ì„ ì“¸ê¹Œ?

PyPy3ì—ì„œ `sys.setrecursionlimit()`ì„ ì§€ìš°ë‹ˆ ë©”ëª¨ë¦¬ ì´ˆê³¼ê°€ ì‚¬ë¼ì¡Œë‹¤.

ë°˜ë³µë¬¸ì„ í’€ê³  ì§ì ‘ ìƒìš°í•˜ì¢Œ 4ë²ˆ í•˜ë“œì½”ë”© í–ˆëŠ”ë° ì´ê²Œ ë” ë¹¨ëë‹¤.

PyPy3 ì œì¶œ ê¸°ì¤€ìœ¼ë¡œ,

4ë²ˆ ë°˜ë³µì€ `155888KB`, `5188ms` ë‚˜ì™”ê³ ,

í•˜ë“œ ì½”ë”©ì€ `154924KB`, `3944ms` ë‚˜ì™€ì„œ ë” ë¹¨ëë‹¤.
