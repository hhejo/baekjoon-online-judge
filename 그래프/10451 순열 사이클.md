# [10451 ìˆœì—´ ì‚¬ì´í´](https://www.acmicpc.net/problem/10451)

### ğŸ¥ˆ 3

### ë¶„ë¥˜

- ìˆœì—´ ì‚¬ì´í´ ë¶„í• 

### í’€ì´ ë‚ ì§œ

- 230304 í† 

---

## CODE 1

```python
import sys

input = sys.stdin.readline


# í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì…ë ¥
T = int(input())


# í’€ì´
def solve():
    global N, arr

    # DFS
    def dfs(s):
        stk = [s]  # ìŠ¤íƒì— ì‹œì‘ ì •ì  í‘¸ì‹œ
        visited[s] = True  # ë°©ë¬¸ ì²˜ë¦¬
        # ìŠ¤íƒ ë°˜ë³µ
        while stk:
            cur = stk.pop()  # í˜„ì¬ ì •ì  íŒ
            nxt = arr[cur]  # ì´ë™í•  ë‹¤ìŒ ì •ì 
            # ë°©ë¬¸í•˜ì§€ ì•Šì•˜ë‹¤ë©´
            if not visited[nxt]:
                stk.append(nxt)  # ë‹¤ìŒ ì •ì  í‘¸ì‹œ
                visited[nxt] = True  # ë°©ë¬¸ ì²˜ë¦¬
        return

    cnt = 0  # ìˆœì—´ ì‚¬ì´í´ ê°œìˆ˜
    visited = [False] * (N + 1)  # ë°©ë¬¸ ì—¬ë¶€
    # 1ë²ˆ ì •ì ë¶€í„° Në²ˆ ì •ì ê¹Œì§€ ë°˜ë³µ
    for i in range(1, N + 1):
        # ë°©ë¬¸í•˜ì§€ ì•Šì•˜ìœ¼ë©´
        if not visited[i]:
            dfs(i)  # ië²ˆ ì •ì ë¶€í„° DFS
            cnt += 1  # ìˆœì—´ ì‚¬ì´í´ ê°œìˆ˜ ì¦ê°€

    print(cnt)  # ì •ë‹µ ì¶œë ¥
    return


# í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ í’€ì´
for test_case in range(T):
    N = int(input())  # ìˆœì—´ì˜ í¬ê¸°
    arr = [0] + list(map(int, input().split()))  # ìˆœì—´ ë°°ì—´
    # í’€ì´
    solve()

```

## í•´ì„¤ 1

ìŠ¤íƒ ì´ìš©í•œ DFS í’€ì´

DFS í•¨ìˆ˜ë¥¼ ë¶€ë¥¸ íšŸìˆ˜ê°€ ì •ë‹µì´ ë¨

ë‹¤ìŒ ì •ì ì€ ë¬´ì¡°ê±´ í•œ ê°œì´ê¸° ë•Œë¬¸ì— ì‰½ë‹¤.

`31256KB`, `232ms`

---

## CODE 2

```python
import sys

input = sys.stdin.readline
sys.setrecursionlimit(2000)


# í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì…ë ¥
T = int(input())


# í’€ì´
def solve():
    global N, arr

    # DFS
    def dfs(s):
        # ì •ì  s ë°©ë¬¸ í–ˆìœ¼ë©´ ì¢…ë£Œ
        if visited[s]:
            return
        visited[s] = True  # ì •ì  s ë°©ë¬¸ ì²˜ë¦¬
        dfs(arr[s])  # ì •ì  sì™€ ì—°ê²°ëœ ë‹¤ìŒ ì •ì  DFS

    cnt = 0  # ìˆœì—´ ì‚¬ì´í´ ê°œìˆ˜
    visited = [False] * (N + 1)  # ë°©ë¬¸ ì—¬ë¶€
    # 1ë²ˆ ì •ì ë¶€í„° Në²ˆ ì •ì ê¹Œì§€ ë°˜ë³µ
    for i in range(1, N + 1):
        # ë°©ë¬¸í•˜ì§€ ì•Šì•˜ìœ¼ë©´
        if not visited[i]:
            dfs(i)  # ië²ˆ ì •ì ë¶€í„° DFS
            cnt += 1  # ìˆœì—´ ì‚¬ì´í´ ê°œìˆ˜ ì¦ê°€

    print(cnt)  # ì •ë‹µ ì¶œë ¥
    return


# í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ í’€ì´
for test_case in range(T):
    N = int(input())  # ìˆœì—´ì˜ í¬ê¸°
    arr = [0] + list(map(int, input().split()))  # ìˆœì—´ ë°°ì—´
    # í’€ì´
    solve()
```

## í•´ì„¤ 2

ì¬ê·€ë¥¼ ì´ìš©í•œ DFS í’€ì´

ì¢€ ë” ì½”ë“œê°€ ë‹¨ìˆœí•´ì¡Œë‹¤.

`sys.setrecursionlimit()`ì„ ì´ìš©í•´ ì¬ê·€ ì œí•œì„ ëŠ˜ë¦°ë‹¤.

ì•ˆ ê·¸ëŸ¬ë©´ í‹€ë¦¼
