# [1963 ì†Œìˆ˜ ê²½ë¡œ](https://www.acmicpc.net/problem/1963)

### ğŸ¥‡ 4

### ë¶„ë¥˜

- ìˆ˜í•™
- ê·¸ë˜í”„ ì´ë¡ 
- ê·¸ë˜í”„ íƒìƒ‰
- ì •ìˆ˜ë¡ 
- ë„ˆë¹„ ìš°ì„  íƒìƒ‰
- ì†Œìˆ˜ íŒì •
- ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´

### í’€ì´ ë‚ ì§œ

- 230324 ê¸ˆ

---

## CODE 1

```python
import sys
from collections import deque

input = sys.stdin.readline


def eratosthenes():
    is_primes = [True] * 10000
    is_primes[0] = is_primes[1] = False
    for i in range(2, int(10000 ** 0.5) + 1):
        for j in range(i + i, 10000, i):
            is_primes[j] = False
    return is_primes


def bfs(start, goal):
    que = deque([start])
    v = [-1] * 10000
    v[start] = 0
    is_primes = eratosthenes()

    while que:
        cur = que.popleft()
        if cur == goal:
            return v[cur]
        for i in range(4):
            arr = list(str(cur))
            for j in map(str, range(10)):
                arr[i] = j
                nxt = int(''.join(arr))
                if 1000 <= nxt <= 9999 and is_primes[nxt] and v[nxt] == -1:
                    que.append(nxt)
                    v[nxt] = v[cur] + 1
    return -1


for test_case in range(int(input())):
    A, B = map(int, input().split())

    res = bfs(A, B)
    if res == -1:
        print('Impossible')
    else:
        print(res)

```

## í•´ì„¤ 1

ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´ë¡œ ì„ì˜ì˜ ìˆ˜ì˜ ì†Œìˆ˜ íŒë³„ì„ ë¹ ë¥´ê²Œ í•œë‹¤.

ë„¤ ìë¦¬ ìˆ«ìì—ì„œ í•œ ìë¦¬ì”© 0 ~ 9ì˜ ìˆ«ìë¡œ ë°”ê¾¼ë‹¤.

ë„¤ ìë¦¬ ìˆ«ìì´ê³ , ì†Œìˆ˜ì´ê³ , ì´ì „ê¹Œì§€ ë„ë‹¬í•˜ì§€ ì•Šì•˜ë˜ ìˆ«ìì´ë©´ ì§„í–‰í•œë‹¤.

`34168KB`, `144ms`

---

## CODE 2

```python
import sys
from collections import deque

#############################
sys.stdin = open('input.txt')
#############################

input = sys.stdin.readline


def get_next_nums(num):
    res = []
    for i in range(4):
        arr = list(str(num))
        for j in map(str, range(10)):
            arr[i] = j
            nxt_num = int(''.join(arr))
            res.append(nxt_num)
    return res


def eratosthenes():
    is_primes = [True] * 10000
    is_primes[0] = is_primes[1] = False
    for i in range(2, int(10000 ** 0.5) + 1):
        for j in range(i + i, 10000, i):
            is_primes[j] = False
    return is_primes


def bfs(start, goal):
    que = deque([start])
    v = [-1] * 10000
    v[start] = 0
    is_primes = eratosthenes()

    while que:
        cur = que.popleft()
        if cur == goal:
            return v[cur]

        next_nums = get_next_nums(cur)
        for nxt in next_nums:
            if 1000 <= nxt <= 9999 and is_primes[nxt] and v[nxt] == -1:
                que.append(nxt)
                v[nxt] = v[cur] + 1
    return -1


for test_case in range(int(input())):
    A, B = map(int, input().split())

    res = bfs(A, B)
    if res == -1:
        print('Impossible')
    else:
        print(res)

```

## í•´ì„¤ 2

1ë²ˆ ì½”ë“œì—ì„œ, ë‹¤ìŒ ìˆ˜ ë°›ëŠ” ì‘ì—…ì„ í•¨ìˆ˜ë¡œ ë¶„ë¦¬í–ˆë‹¤.

`34192KB`, `148ms`
