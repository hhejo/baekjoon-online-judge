# [3055 íƒˆì¶œ](https://www.acmicpc.net/problem/3055)

### ğŸ¥‡ 4

### ë¶„ë¥˜

- ê·¸ë˜í”„ ì´ë¡ 
- ê·¸ë˜í”„ íƒìƒ‰
- ë„ˆë¹„ ìš°ì„  íƒìƒ‰

### í’€ì´ ë‚ ì§œ

- 230406 ëª©
- 230626 ì›”
- 230703 ì›”

---

## CODE 1

```python
import sys
from collections import deque

input = sys.stdin.readline

#


def flood():
    global R, C, g, dx, dy
    a = [[False] * C for _ in range(R)]
    for x in range(R):
        for y in range(C):
            if g[x][y] == '*':
                for i in range(4):
                    nx, ny = x + dx[i], y + dy[i]
                    if 0 <= nx < R and 0 <= ny < C and g[nx][ny] == '.':
                        a[nx][ny] = True
    for x in range(R):
        for y in range(C):
            if a[x][y]:
                g[x][y] = '*'
    return


def bfs(sx, sy, gx, gy):
    global R, C, g, dx, dy
    que = deque([(sx, sy)])
    v = [[-1] * C for _ in range(R)]
    v[sx][sy] = 0
    wave = 0
    while que:
        cx, cy = que.popleft()
        if wave <= v[cx][cy]:
            flood()
            wave += 1
        if cx == gx and cy == gy:
            return v[cx][cy]
        for i in range(4):
            nx, ny = cx + dx[i], cy + dy[i]
            if 0 <= nx < R and 0 <= ny < C and v[nx][ny] == -1:
                if g[nx][ny] == '.' or g[nx][ny] == 'D':
                    que.append((nx, ny))
                    v[nx][ny] = v[cx][cy] + 1
    return None


R, C = map(int, input().split())
g = [list(input().rstrip()) for _ in range(R)]

sx = sy = gx = gy = 0
for x in range(R):
    for y in range(C):
        if g[x][y] == 'S':
            sx, sy = x, y
            g[x][y] = '.'
        if g[x][y] == 'D':
            gx, gy = x, y

dx, dy = (-1, 0, 1, 0), (0, 1, 0, -1)
res = bfs(sx, sy, gx, gy)
if res:
    print(res)
else:
    print('KAKTUS')

```

## í•´ì„¤ 1

ë¨¼ì € ë¬¼ì„ ì°¨ì˜¤ë¥´ê²Œ í•˜ê³  BFSë¥¼ ì§„í–‰í•œë‹¤.

BFSì˜ ë‹¨ê³„ì— ë”°ë¼ ë˜ ë¬¼ì„ ì°¨ì˜¤ë¥´ê²Œ í•œë‹¤.

`34244KB`, `284ms`

---

## CODE 2

```python
import sys
from collections import deque

input = sys.stdin.readline

dx, dy = (-1, 1, 0, 0), (0, 0, -1, 1)


def set_flood(r, c, graph):
    global dx, dy
    graph2 = []
    for row in graph:
        graph2.append(row[:])
    for x in range(r):
        for y in range(c):
            if graph[x][y] == '*':
                for i in range(4):
                    nx, ny = x + dx[i], y + dy[i]
                    if 0 <= nx < r and 0 <= ny < c and graph[nx][ny] in '.So':
                        graph2[nx][ny] = '*'
    return graph2


def bfs(r, c, graph, sx, sy, gx, gy):
    global dx, dy
    que = deque([(sx, sy)])
    v = [[-1] * c for _ in range(r)]
    v[sx][sy] = 0
    wave = 0
    while que:
        cx, cy = que.popleft()
        if cx == gx and cy == gy:
            return v[cx][cy]
        if v[cx][cy] == wave:
            graph = set_flood(r, c, graph)
            wave += 1
        for i in range(4):
            nx, ny = cx + dx[i], cy + dy[i]
            if 0 <= nx < r and 0 <= ny < c and graph[nx][ny] in '.D' and v[nx][ny] == -1:
                graph[nx][ny] = 'o'
                que.append((nx, ny))
                v[nx][ny] = v[cx][cy] + 1
    return 'KAKTUS'


r, c = map(int, input().split())
graph = [list(input().rstrip()) for _ in range(r)]

sx = sy = gx = gy = 0
for x in range(r):
    for y in range(c):
        if graph[x][y] == 'S':
            sx, sy = x, y
        elif graph[x][y] == 'D':
            gx, gy = x, y

ans = bfs(r, c, graph, sx, sy, gx, gy)
print(ans)

```

## í•´ì„¤ 2

BFS

ë¬¼ì„ ë¨¼ì € ì±„ìš°ê³  ê³ ìŠ´ë„ì¹˜ë¥¼ ì´ë™ì‹œí‚¨ë‹¤

`34244KB`, `244ms`

---

## CODE 3

```python
import sys
from collections import deque

input = sys.stdin.readline


def init(r, c, graph):
    que = deque()
    for x in range(r):
        for y in range(c):
            if graph[x][y] == 'S':
                que.append((x, y))
    for x in range(r):
        for y in range(c):
            if graph[x][y] == '*':
                que.append((x, y))
    gx = gy = 0
    for x in range(r):
        for y in range(c):
            if graph[x][y] == 'D':
                gx, gy = x, y
    return que, gx, gy


def bfs(r, c, graph):
    dx, dy = (-1, 1, 0, 0), (0, 0, -1, 1)
    que, gx, gy = init(r, c, graph)
    v = [[0] * c for _ in range(r)]
    while que:
        cx, cy = que.popleft()
        if graph[gx][gy] == 'S':
            return v[gx][gy]
        for i in range(4):
            nx, ny = cx + dx[i], cy + dy[i]
            if 0 <= nx < r and 0 <= ny < c:
                if graph[cx][cy] == 'S' and graph[nx][ny] in '.D':
                    graph[nx][ny] = 'S'
                    v[nx][ny] = v[cx][cy] + 1
                    que.append((nx, ny))
                elif graph[cx][cy] == '*' and graph[nx][ny] in '.S':
                    graph[nx][ny] = '*'
                    que.append((nx, ny))
    return 'KAKTUS'


r, c = map(int, input().split())
graph = [list(input().rstrip()) for _ in range(r)]

ans = bfs(r, c, graph)
print(ans)

```

## í•´ì„¤ 3

ë§¨ ì²˜ìŒ ê³ ìŠ´ë„ì¹˜ì˜ ìœ„ì¹˜ë¥¼ íì— ë„£ê³ , ê·¸ ë‹¤ìŒ ë¬¼ì˜ ìœ„ì¹˜ë¥¼ íì— ë„£ê³  ì‹œì‘í•œë‹¤

ì´í›„ BFSê°€ ì§„í–‰ë˜ë©´ì„œ ê³ ìŠ´ë„ì¹˜, ë¬¼ ìˆœìœ¼ë¡œ í¼ì§€ê³ , ë¬¼ì€ ê³ ìŠ´ë„ì¹˜ ìœ„ì¹˜ë¥¼ ë®ê²Œëœë‹¤

ëª©í‘œ ìœ„ì¹˜ë¡œ ê³ ìŠ´ë„ì¹˜ê°€ ì´ë™í–ˆë‹¤ë©´ ìµœë‹¨ ê±°ë¦¬ë¥¼ ì¶œë ¥í•œë‹¤

2ë²ˆ í’€ì´ë³´ë‹¤ í›¨ì”¬ ë¹¨ëë‹¤

`34232KB`, `64ms`

---

## CODE 4

```python
import sys
from collections import deque

input = sys.stdin.readline


def bfs(sx, sy, gx, gy):
    global r, c, graph
    dx, dy = (-1, 1, 0, 0), (0, 0, -1, 1)
    que = deque([(sx, sy)])
    for x in range(r):
        for y in range(c):
            if graph[x][y] == '*':
                que.append((x, y))
    v = [[-1] * c for _ in range(r)]
    v[sx][sy] = 0
    while que:
        cx, cy = que.popleft()
        if graph[gx][gy] == 'S':
            return v[gx][gy]
        for i in range(4):
            nx, ny = cx + dx[i], cy + dy[i]
            if 0 <= nx < r and 0 <= ny < c:
                if graph[cx][cy] == 'S' and graph[nx][ny] in '.D':
                    que.append((nx, ny))
                    v[nx][ny] = v[cx][cy] + 1
                    graph[nx][ny] = 'S'
                elif graph[cx][cy] == '*' and graph[nx][ny] in '.S':
                    que.append((nx, ny))
                    graph[nx][ny] = '*'
    return 'KAKTUS'


r, c = map(int, input().split())
graph = [list(input().rstrip()) for _ in range(r)]

sx = sy = gx = gy = 0
for x in range(r):
    for y in range(c):
        if graph[x][y] == 'S':
            sx, sy = x, y
        if graph[x][y] == 'D':
            gx, gy = x, y

ans = bfs(sx, sy, gx, gy)
print(ans)

```

## í•´ì„¤ 4

ë¬¼ì˜ ê²½ìš°ì— ì´ë¯¸ ë°©ë¬¸ëœ ìœ„ì¹˜ì—¬ë„ ê³ ìŠ´ë„ì¹˜ê°€ ìˆëŠ” ìœ„ì¹˜ë¼ë©´ ë‹¤ì‹œ ë°©ë¬¸í•´ì•¼ í•œë‹¤

`34208KB`, `100ms`
