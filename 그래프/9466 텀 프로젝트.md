# [9466 í…€ í”„ë¡œì íŠ¸](https://www.acmicpc.net/problem/9466)

### ğŸ¥‡ 3

### ë¶„ë¥˜

- ê·¸ë˜í”„ ì´ë¡ 
- ê·¸ë˜í”„ íƒìƒ‰
- ê¹Šì´ ìš°ì„  íƒìƒ‰

### í’€ì´ ë‚ ì§œ

- 230306 ì›”
- 230404 í™”
- 230703 ì›”

---

## CODE 1

```python
import sys

input = sys.stdin.readline


# í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì…ë ¥
T = int(input())


# í’€ì´
def solve():
    global N, arr

    # DFS
    def dfs(start):
        stk = [start]  # ìŠ¤íƒì— ì‹œì‘ í•™ìƒ ë²ˆí˜¸ í‘¸ì‹œ
        visited[start] = True  # í•´ë‹¹ í•™ìƒ ë°©ë¬¸ ì²˜ë¦¬
        cycle = [start]  # ì‚¬ì´í´ ëª©ë¡ì— ì¶”ê°€
        cnt = 0  # í•œ íŒ€ì´ ë  ìˆ˜ ìˆëŠ”, ì‚¬ì´í´ì´ ë§Œë“¤ì–´ì¡Œì„ ë•Œ ì‚¬ì´í´ì— ì†í•œ í•™ìƒë“¤ì˜ ìˆ˜
        # ìŠ¤íƒ ë°˜ë³µ
        while stk:
            cur = stk.pop()  # í˜„ì¬ í•™ìƒ
            nxt = arr[cur]  # ê°€ë¦¬í‚¤ëŠ” ë‹¤ìŒ í•™ìƒ
            # ë°©ë¬¸í•˜ì§€ ì•Šì€ í•™ìƒì´ë©´
            if not visited[nxt]:
                stk.append(nxt)  # ë‹¤ìŒ í•™ìƒì„ ìŠ¤íƒì— í‘¸ì‹œ
                visited[nxt] = True  # ë‹¤ìŒ í•™ìƒ ë°©ë¬¸ ì²˜ë¦¬
                cycle.append(nxt)  # ë‹¤ìŒ í•™ìƒì„ ì‚¬ì´í´ ëª©ë¡ì— ì¶”ê°€
            # ë°©ë¬¸í•œ í•™ìƒì´ë©´
            else:
                # ì‚¬ì´í´ì´ ë§Œë“¤ì–´ì¡Œìœ¼ë©´
                if nxt in cycle:
                    cnt = len(cycle[cycle.index(nxt):])  # ì‚¬ì´í´ì— ì†í•œ í•™ìƒ ìˆ˜ ê³„ì‚°
                    break
        return cnt

    visited = [False] * (N + 1)  # í•™ìƒ ë°©ë¬¸ ì—¬ë¶€
    cnt = 0  # íŒ€ì´ ëœ í•™ìƒë“¤
    # 1ë²ˆ í•™ìƒë¶€í„° Në²ˆ í•™ìƒ
    for i in range(1, N + 1):
        # ë°©ë¬¸í•˜ì§€ ì•Šì€ í•™ìƒì´ë©´ DFS
        if not visited[i]:
            cnt += dfs(i)  # í•œ íŒ€ì´ ë  ìˆ˜ ìˆëŠ” ìˆ˜ ëˆ„ì 

    ans = N - cnt  # ì „ì²´ í•™ìƒ ìˆ˜ - í•œ íŒ€ì´ ë  ìˆ˜ ìˆëŠ” ìˆ˜
    print(ans)  # ì •ë‹µ ì¶œë ¥
    return


# í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤
for test_case in range(T):
    # ì…ë ¥
    N = int(input())
    arr = [0] + list(map(int, input().split()))
    # í’€ì´
    solve()

```

## í•´ì„¤ 1

DFSë¥¼ ì´ìš©í•˜ë©´ì„œ ì‚¬ì´í´ì´ ë§Œë“¤ì–´ì§€ëŠ”ì§€ í™•ì¸í•œë‹¤.

ì‚¬ì´í´ì´ ë§Œë“¤ì–´ì¡Œë‹¤ë©´, ì–´ë””ì„œë¶€í„° ì–´ë””ê¹Œì§€ê°€ ì‚¬ì´í´ì¸ì§€ í™•ì¸í•œë‹¤.

ìŠ¤íƒ, ë°©ë¬¸ ì—¬ë¶€ ë°°ì—´ì„ ì‚¬ìš©í–ˆê³ , ì¶”ê°€ë¡œ ì‚¬ì´í´ì¸ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ë°©ë¬¸í•  ë•Œë§ˆë‹¤ ì‚¬ì´í´ ë°°ì—´ì— í˜„ì¬ê¹Œì§€ ë°©ë¬¸í•œ ë…¸ë“œë¥¼ ì¶”ê°€í–ˆë‹¤.

`47460KB`, `2260ms`

---

## CODE 2

```python
import sys

input = sys.stdin.readline


def dfs(start, v):
    global N, a
    stk = [start]
    v[start] = True
    cycle = [start]
    res = 0
    while stk:
        cur = stk.pop()
        nxt = a[cur]
        if not v[nxt]:
            stk.append(nxt)
            v[nxt] = True
            cycle.append(nxt)
        elif nxt in cycle:
            idx = cycle.index(nxt)
            res = len(cycle) - idx
            break
    return res


for test_case in range(int(input())):
    N = int(input())
    a = [0] + list(map(int, input().split()))
    v = [False] * (N + 1)

    ans = 0
    cnt = 0
    for i in range(1, N + 1):
        if not v[i]:
            cnt += dfs(i, v)
    ans = N - cnt
    print(ans)

```

## í•´ì„¤ 2

`48284KB`, `2420ms`

---

## CODE 3

```python
import sys

input = sys.stdin.readline


def dfs(start):
    global n, arr, v
    stk = [start]
    cycle = [start]
    v[start] = True
    res = 0
    while stk:
        cur = stk.pop()
        nxt = arr[cur]
        if not v[nxt]:
            stk.append(nxt)
            cycle.append(nxt)
            v[nxt] = True
        elif nxt in cycle:
            res = len(cycle) - cycle.index(nxt)
            break
    return res


for test_case in range(int(input())):
    n = int(input())
    arr = [0] + list(map(int, input().split()))

    cnt = 0
    v = [False] * (n + 1)
    for i in range(1, n + 1):
        if not v[i]:
            cnt += dfs(i)

    ans = n - cnt
    print(ans)

```

## í•´ì„¤ 3

`48284KB`, `2388ms`
