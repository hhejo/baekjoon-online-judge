# [9466 ν…€ ν”„λ΅μ νΈ](https://www.acmicpc.net/problem/9466)

### π¥‡ 3

### λ¶„λ¥

- κ·Έλν”„ μ΄λ΅ 
- κ·Έλν”„ νƒμƒ‰
- κΉμ΄ μ°μ„  νƒμƒ‰

### ν’€μ΄ λ‚ μ§

- 230306 μ›”
- 230404 ν™”

---

## CODE 1

```python
import sys

input = sys.stdin.readline


# ν…μ¤νΈμΌ€μ΄μ¤ μ…λ ¥
T = int(input())


# ν’€μ΄
def solve():
    global N, arr

    # DFS
    def dfs(start):
        stk = [start]  # μ¤νƒμ— μ‹μ‘ ν•™μƒ λ²νΈ ν‘Έμ‹
        visited[start] = True  # ν•΄λ‹Ή ν•™μƒ λ°©λ¬Έ μ²λ¦¬
        cycle = [start]  # μ‚¬μ΄ν΄ λ©λ΅μ— μ¶”κ°€
        cnt = 0  # ν• ν€μ΄ λ  μ μλ”, μ‚¬μ΄ν΄μ΄ λ§λ“¤μ–΄μ΅μ„ λ• μ‚¬μ΄ν΄μ— μ†ν• ν•™μƒλ“¤μ μ
        # μ¤νƒ λ°λ³µ
        while stk:
            cur = stk.pop()  # ν„μ¬ ν•™μƒ
            nxt = arr[cur]  # κ°€λ¦¬ν‚¤λ” λ‹¤μ ν•™μƒ
            # λ°©λ¬Έν•μ§€ μ•μ€ ν•™μƒμ΄λ©΄
            if not visited[nxt]:
                stk.append(nxt)  # λ‹¤μ ν•™μƒμ„ μ¤νƒμ— ν‘Έμ‹
                visited[nxt] = True  # λ‹¤μ ν•™μƒ λ°©λ¬Έ μ²λ¦¬
                cycle.append(nxt)  # λ‹¤μ ν•™μƒμ„ μ‚¬μ΄ν΄ λ©λ΅μ— μ¶”κ°€
            # λ°©λ¬Έν• ν•™μƒμ΄λ©΄
            else:
                # μ‚¬μ΄ν΄μ΄ λ§λ“¤μ–΄μ΅μΌλ©΄
                if nxt in cycle:
                    cnt = len(cycle[cycle.index(nxt):])  # μ‚¬μ΄ν΄μ— μ†ν• ν•™μƒ μ κ³„μ‚°
                    break
        return cnt

    visited = [False] * (N + 1)  # ν•™μƒ λ°©λ¬Έ μ—¬λ¶€
    cnt = 0  # ν€μ΄ λ ν•™μƒλ“¤
    # 1λ² ν•™μƒλ¶€ν„° Nλ² ν•™μƒ
    for i in range(1, N + 1):
        # λ°©λ¬Έν•μ§€ μ•μ€ ν•™μƒμ΄λ©΄ DFS
        if not visited[i]:
            cnt += dfs(i)  # ν• ν€μ΄ λ  μ μλ” μ λ„μ 

    ans = N - cnt  # μ „μ²΄ ν•™μƒ μ - ν• ν€μ΄ λ  μ μλ” μ
    print(ans)  # μ •λ‹µ μ¶λ ¥
    return


# ν…μ¤νΈμΌ€μ΄μ¤
for test_case in range(T):
    # μ…λ ¥
    N = int(input())
    arr = [0] + list(map(int, input().split()))
    # ν’€μ΄
    solve()

```

## ν•΄μ„¤ 1

DFSλ¥Ό μ΄μ©ν•λ©΄μ„ μ‚¬μ΄ν΄μ΄ λ§λ“¤μ–΄μ§€λ”μ§€ ν™•μΈν•λ‹¤.

μ‚¬μ΄ν΄μ΄ λ§λ“¤μ–΄μ΅λ‹¤λ©΄, μ–΄λ””μ„λ¶€ν„° μ–΄λ””κΉμ§€κ°€ μ‚¬μ΄ν΄μΈμ§€ ν™•μΈν•λ‹¤.

μ¤νƒ, λ°©λ¬Έ μ—¬λ¶€ λ°°μ—΄μ„ μ‚¬μ©ν–κ³ , μ¶”κ°€λ΅ μ‚¬μ΄ν΄μΈμ§€ ν™•μΈν•κΈ° μ„ν•΄ λ°©λ¬Έν•  λ•λ§λ‹¤ μ‚¬μ΄ν΄ λ°°μ—΄μ— ν„μ¬κΉμ§€ λ°©λ¬Έν• λ…Έλ“λ¥Ό μ¶”κ°€ν–λ‹¤.

`47460KB`, `2260ms`

---

## CODE 2

```python
import sys

input = sys.stdin.readline


def dfs(start, v):
    global N, a
    stk = [start]
    v[start] = True
    cycle = [start]
    res = 0
    while stk:
        cur = stk.pop()
        nxt = a[cur]
        if not v[nxt]:
            stk.append(nxt)
            v[nxt] = True
            cycle.append(nxt)
        elif nxt in cycle:
            idx = cycle.index(nxt)
            res = len(cycle) - idx
            break
    return res


for test_case in range(int(input())):
    N = int(input())
    a = [0] + list(map(int, input().split()))
    v = [False] * (N + 1)

    ans = 0
    cnt = 0
    for i in range(1, N + 1):
        if not v[i]:
            cnt += dfs(i, v)
    ans = N - cnt
    print(ans)

```

## ν•΄μ„¤ 2

`48284KB`, `2420ms`

